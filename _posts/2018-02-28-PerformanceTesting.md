---
layout: post
title: Performance Testing
tags: [Markdown, PerformanceTesting]
---

---
# Performance Testing Guidance for Web Applications 읽고 정리
---
## Part1 Introduction to Performance Testing
## Chapter 1 Fundamentals of Web Application Performance Testing

### 성능테스트의 정의

성능테스트는 주어진 작업 부하에서 시스템의
- responsiveness(응답성)
- throughput(처리량)
- reliability(안정성)
- scalability(확장성)
을 검증하기 위한 테스트이다.

#### 성능테스트의 핵심
1. Identify Test Environment (테스트 환경 확인)
2. Identify Performance Acceptance Criteria (성능 수용 기준 확인)
3. Plan and Design Tests (테스트 설계)
4. Configure Test Environment (테스트 환경 준비)
5. Implement Test Design (성능 테스트 구현)
6. Execute Tests (테스트 실행 및 모니터링)
7. Analyze, Resport, and Restest (결과, 보고서를 분석 후 다시 테스트)

#### 성능테스트를 수행하는 이유
- 출시 준비 여부 평가
- 인프라 적합성 평가
- 개발된 소프트웨어 성능의 적절성 평가
- 성능 튜닝의 효율성 향상

#### 프로젝트와 성능테스트의 관련성
성공적인 성능테스트를 위해서는 프로젝트를 잘 파악해야 한다.
- Project vision(프로젝트 비전)
- Purpose of the system(테스트하려는 시스템의 목적)
- Customer or user expectations(고객 또는 사용자의 기대)
- Business drives(비즈니스 요구사항)
- Reasons for testing performance(성능테스트를 수행하는 이유)
- Value that performance testing brings to the project(성능테스트가 프로젝트에 가져올 것으로 기대되는 가치)
- Project management and staffing(프로젝트 관리 및 운영)
- Process(방법)
- Compliance Criteria(프로젝트와 관련된 준수 사항)
- Project schedule(프로젝트 일정)

즉, 성능테스트는 시스템의 병목 현상을 파악하고, 향후 테스트를 위한 기준을 수립하며, 성능 튜닝에 대한 노력을 지원하고, 성능 목표 및 요구사항을 준수하는지 확인하는데 도움이 된다.  

---

## Chapter 2 Types of Performance Testing

### 성능테스트의 종류 및 필요한 상황
 성능테스트는 다양한 유형이 있다. 웹 어플리케이션(응용프로그램)의 가장 일반적인 유형의 성능 테스트 네 가지는 다음과 같다.

#### Performance test (성능테스트)
- 목적: 속도, 확장성, 안정성 검증
- 테스트 중인 제품의 응답성, 속도, 안정성을 검증하기 위한 기술조사로, 올바른 비즈니스 결정을 내리는 데 필요한 정보를 제공한다.
- 시스템의 사용자가 어플리케이션의 성능 특성에 만족하는지에 중점을 두고, 기대와 현실의 불일치를 확인한다.
- 한계: 로드시에만 나타나는 일부 기능 결함은 감지하지 못할 수 있다.

#### Load test (부하테스트)
- 목적: 정상 부하와 최대 부하일 때, 어플리케이션의 동작을 검증
- 어플리케이션이 원하는 성능 목표를 충족시킬 수 있는지 확인하기 위해 수행한다. 응답시간, 처리 속도, 자원 사용 수준을 측정하고, 어플리케이션 중단점(breaking point)이 최대 부하 조건 아래에서 발생한다고 가정하였을 때, 어플리케이션 중단점을 식별한다.
- SLA(이용자와 사용자 사이에서의 서비스 레벨 계약)에서 지정되는 경우가 많음.
- 하드웨어 환경의 적합성을 평가하고, 로드 중 기능 오류를 감지한다. 또한, 성능이 저하되기 전과 자원 활용 한도를 초과하기 전에 어플리케이션이 처리할 수 있는 로드의 양을 결정하는 데 도움을 준다.
- 한계: 응답 속도에 집중하도록 설계되지 않았으므로, 결과는 다른 관련 부하테스트와 비교할 때만 사용해야 한다.

#### Stress test (스트레스 테스트)
- 목적: 정상 부하와 최대 부하를 초과할 때, 어플리케이션의 동작을 검증
- 높은 부하일 때만 나타나는 어플리케이션 버그(synchronization issue, race condition, memory leak 등)를 알아내는 것을 목적으로 한다. 스트레스 테스트를 통해 어플리케이션의 약점을 알아내고, 극단적인 부하 조건에서 어플리케이션이 어떻게 동작하는지를 확인할 수 있다.
- 시스템 과부하로 인해 데이터가 손상될 수 있는지를 판별한다. 장애 직전에 경고하기 위해 어플리케이션 모니터링 트리거를 설정할 수 있으며, 높은 부하에서 보안 취약점이 생기지 않는지 확인한다.
- 한계: 테스트 환경으로 격리되지 않으면 어플리케이션이나 네트워크의 장애를 유발할 수 있다.

#### Capacity test (수용량 테스트)
- 목적: 주어진 시스템이 얼마나 많은 사용자 및 트랜젝션을 지원하는지 결정
- 수용량 계획과 함께 수행되며, 사용자 증가나 데이터 증가와 같은 미래의 성장에 대한 계획에 사용한다. 미래 부하를 수용하려면, 향후 사용 수준을 지원하는데 추가 리소스(프로세서 용량, 메모리 사용량, 디스크 용량, 네트워크 대역폭 등)가 얼마나 필요한지 알아야 하므로 필요하다. 그러므로 수용량 테스트를 통해 스케일 업 또는 스케일 아웃 해야하는지의 여부를 결정할 수 있다.

### 추가적인 성능 테스트 개념(용어)

#### Component test
 프로그램 아키텍처 구성요소를 대상으로 한 성능 테스트이다. 일반적으로 구성요소에는 서버, 데이터베이스, 네트워크, 방화벽, 클라이언트, 저장장치가 포함된다.
#### Investigation
 제품 품질을 결정하거나 향상시키는 데 가치가 있을 수 있는 정보 수집을 뜻한다. 관측된 성능 문제의 근본 원인에 대한 가설을 입증하거나 반증하기 위해 자주 사용된다.
#### Smoke test
 어플리케이션이 정상적인 부하의 작업을 수행할 수 있는지 확인하기 위한 초기 성능 테스트이다.
#### Unit test
 어플리케이션 코드 전체의 하위 집합인 코드 모듈을 대상으로 하는 테스트를 말한다. 일반적으로 모듈에는 함수, 프로시저, 루틴, 객체, 메서드, 클래스를 포함한다. 단위테스트는 코드 모듈을 작성한 개발자가 만들고 수행한다.

#### Validation test
 제품에 대한 기대와 실제 제품에 대해 성능, 확장성, 안정성을 비교하는 테스트이다.

---
## Chapter 3 Risks Addressed Through Performance Testing

### 성능테스트 시 위험 사항

#### Speed-Related Risks(속도 위험)
##### 일반적인 속도 위험
- 어플리케이션이 최종 사용자를 만족시킬 만큼 빠른가?
- 어플리케이션에서 수집한 데이터가 오래되기 전에 데이터를 처리하고 활용할 수 있는가?
- 애플리케이션이 사용자에게 최신 정보를 제공할 수 있는가?
- 오류가 발생하기 전에, 예상 응답 시간 내에 웹 서비스가 응답하는가?
##### 위험 완화 전략
- 실적 요구사항과 목표가 사용자의 요구를 나타내는지 확인하라.
- 이전 버전 및 경쟁 어플리케이션과 속도 측정을 비교하라.
- 실제 테스트 과정에서, 운영에 사용되는 것과 유사한 데이터 유형으로 성능 테스트를 수행하라.
- 최대 부하를 받고있는 동안 시스템에 대한 사용자의 만족도 피드백을 요창하라.
- 주기적 시스템 프로세스(매주 정기 백업 등)가 실행되는 동안, 적어도 일부의 성능테스트가 수행되는지 확인하라.
- 다양한 조건, 부하 수준 및 시나리오에서 속도를 측정하라.(사용자에게는 일관된 속도가 중요하다.)
- 성능 테스트 중에 모두 올바른 데이터가 표시되고 저장되었는지 확인하라.

#### Scalability-Related Risks(확장성 위험)
##### 일반적인 확장성 위험
- 어플리케이션이 전체 사용자에 대해 일관되고 수용 가능한 응답시간을 제공할 수 있는가?
- 어플리케이션이 자신의 수명 동안 수집되는 모든 데이터를 저장할 수 있는가?
- 어플리케이션이 최고 수용량에 도달했음을 나타내는 경고 신호가 있는가?
- 과도한 사용이 있어도 어플리케이션의 보안이 유지되는가?
- 과도한 사용으로 인해 기능이 손상되지는 않는가?
- 어플리케이션이 예상치 못한 최고 부하를 견딜 수 있는가?
##### 위험 완화 전략
- 다양한 부하에서 측정된 속도를 비교하라.(최종 사용자는 얼마나 많은 사람들이 동시에 사용하는지에 대해 관심이 없다.)
- 정상 및 예상된 최대 부하 때, 실제 workload를 복제하는 부하테스트를 설계하라.
- 실제 테스트 과정에서, 운영에 사용되는 것과 유사한 데이터 유형으로 성능 테스트를 수행하라.
- 실제 요구 사항에 매핑되는 의미있는 성능 테스트를 수행하라.
- 확장성 한계를 찾으면 부하를 점차적으로 줄이고 재검사하여, 어플리케이션이 대책을 적용할 수 있는 충분한 시간 내에, 한계에 도달했다는 것을 알 수 있게 하라.
- 특정 사용자 요청에 응답하여 생성된 데이터베이스 항목을 확인하거나, 반환된 내용의 유효성을 검사하여, 다양한 로드에서 기능적 정확성을 검증하라.
- 기대되는 최대 로드를 초과하는 성능테스트를 수행하고, 테스트 도중과 테스트 이후에 사용자 및 이해관계자가 수동으로 어플리케이션에 액세스하도록하여 동작을 관찰하라.

#### Stability-Related Risks(안정성 위험)
##### 일반적인 안정성 위험
- 데이터 손상, 속도 저하, 재부팅없이 오랜 시간동안 어플리케이션을 실행할 수 있는가?
- 어플리케이션이 예기치 않게 작동을 멈추면 부분적으로 완료된 트랜젝션은 어떻게 되는가?
- 예정되었든 아니든 어플리케이션의 중단 이후에 다시 온라인 상태로 전환되면, 사용자가 기대한 것을 볼 수 있는가?
- 기능 오류로 인해 시스템 충돌이 발생할 수 있는가?
- 시스템 전체에 부작용을 일으키는 트랜잭션이 있는가?
- 로드밸런싱 환경에서 한쪽이 죽었을 때도 사용자에게 정상적인 서비스를 제공할 수 있는가?
- 시스템을 패치하지 않고 업데이트 할 수 있는가?
##### 위험 완화 전략
- 주요 시나리오로 스트레스 테스트를 수행하라
- 실제 테스트 과정에서, 운영에 사용되는 것과 유사한 데이터 유형으로 성능 테스트를 수행하라.
- 테스트 중에 서버를 오프라인으로 가져와 나머지 시스템의 기능, 성능 및 데이터 무결성 동작을 관찰하라.
- 시스템 재부팅 직전과 직후에 동일한 테스트를 수행하여 결과를 비교하라.
- 성능 테스트 시나리오에 오류 또는 예외 사례를 포함시켜라.
- 성능 테스트 중에 시스템에 패치를 적용하라.
- 성능 테스트 중에 백업 또는 바이러스 정의 업데이트를 강제 실행하라.

---
